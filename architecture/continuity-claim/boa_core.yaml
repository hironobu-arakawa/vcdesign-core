# boa_core.yaml
# BOA — Boundary-Oriented Architecture
#
# This file is the authoritative core specification of BOA.
# All normative definitions live under /boa/specs.
#
# BOA is governed by VCDesign Core and must not redefine
# value, judgment, or responsibility.

boa_core:
  name: "Boundary-Oriented Architecture"
  short_name: "BOA"
  version: "1.1.0"
  status: "frozen"

  governed_by:
    vcdesign_core:
      authoritative_spec: "/specs/vcdesign_core.yaml"
      guarantees:
        - "does_not_redefine_value"
        - "does_not_redefine_judgment"
        - "does_not_redefine_responsibility"

  intent:
    description: >
      BOA structures systems around explicit boundaries.
      At each boundary, judgments are either evaluated for
      determinability or formally handed off without silence.
    non_goals:
      - define_business_value
      - decide_outcomes
      - automate_responsibility
      - optimize_judgments

  # -------------------------------------------------------------------
  # Core components (normative)
  # -------------------------------------------------------------------
  components:

    boundary:
      description: >
        A boundary represents an interface where judgment
        may be attempted.
      guarantees:
        - "explicit_scope"
        - "explicit_interface"
        - "no_implicit_escalation"

    determinability_gate:
      name: "Interface Determinability Gate (IDG)"
      role: >
        Evaluates whether a judgment is determinable within
        the declared boundary.
      authoritative_spec: "/specs/determinability_gate.yaml"
      guarantees:
        - "does_not_decide"
        - "does_not_assign_responsibility"
        - "emits_explicit_determinability_classification"

    resolution_protocol:
      name: "Resolution Protocol (RP)"
      role: >
        Controls elevation from Meaning to Resolution
        after determinability evaluation.
      authoritative_spec: "/specs/resolution_protocol.yaml"
      prerequisites:
        - "determinability_gate.classification == DETERMINABLE"
      guarantees:
        - "no_resolution_without_responsible_actor"
        - "no_silent_resolution"
        - "formal_handoff_on_failure"

  # -------------------------------------------------------------------
  # Canonical judgment flow (normative)
  # -------------------------------------------------------------------
  judgment_flow:
    description: >
      Canonical and non-bypassable judgment flow in BOA.
    steps:
      - step: attempt_judgment
        description: "A judgment is requested within a boundary."

      - step: determinability_check
        component: determinability_gate
        description: >
          IDG evaluates whether the judgment is determinable.

      - step: classification_branch
        branches:
          DETERMINABLE:
            next: resolution_protocol
          INDETERMINABLE:
            next: resolution_protocol
          UNKNOWN:
            next: resolution_protocol

      - step: resolution_protocol
        description: >
          RP either promotes to Resolution or formally routes
          the case to human judgment or responsibility pool.

  # -------------------------------------------------------------------
  # Invariants (non-negotiable)
  # -------------------------------------------------------------------
  invariants:
    - "All judgments must pass through IDG before RP"
    - "RP must not be invoked without an IDG output"
    - "No component may elevate to Resolution without RP"
    - "Indeterminability is a valid and recordable outcome"
    - "UNKNOWN must never be treated as success"
    - "No judgment may bypass boundary declaration"

  # -------------------------------------------------------------------
  # Extension policy
  # -------------------------------------------------------------------
  extension_policy:
    allowed:
      - add_boundary_types
      - add_domain_specific_idg_rules_via_binding
      - add_routing_targets_in_rp
    forbidden:
      - weaken_idg_core_rules
      - auto_promote_resolution
      - redefine_responsibility
      - bypass_judgment_flow

  # -------------------------------------------------------------------
  # Positioning
  # -------------------------------------------------------------------
  positioning:
    description: >
      BOA is a reference architecture derived from VCDesign.
      It demonstrates how VCDesign constraints can be realized
      without prescribing implementation details.
    exclusivity: false

  # -------------------------------------------------------------------
  # Closure
  # -------------------------------------------------------------------
  closure:
    statement: >
      BOA guarantees that judgments either become explicit,
      responsibility-bearing resolutions or are formally
      returned without silence.
      Anything beyond this structure remains human judgment.


    determinability_gate:
      name: "Interface Determinability Gate (IDG)"
      role: >
        Evaluates whether a judgment is determinable within
        the declared boundary.
      authoritative_spec: "/specs/determinability_gate.yaml"

      # ↓ この参照を追加
      profile_index_ref: "/patterns/idg/profiles/profiles_index.yaml"

      guarantees:
        - "does_not_decide"
        - "does_not_assign_responsibility"
        - "emits_explicit_determinability_classification"
